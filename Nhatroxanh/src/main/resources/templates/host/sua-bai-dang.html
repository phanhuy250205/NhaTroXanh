<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng tin trọ</title>
    <link rel="stylesheet" th:href="@{/css/sidebar.css}" />
    <!-- ICON -->
    <link
      rel="icon"
      th:href="@{/images/logo/nhatroxanh(title).png}"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}" />
    <!-- Swiper CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <!-- AOS CSS -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
    <style>
      body {
        background: linear-gradient(135deg, #f4f4f4, #e0e7ff);
        font-family: "Arial", sans-serif;
        color: #333;
      }

      .breadcrumb-item a {
        color: #000;             /* Màu mặc định */
        text-decoration: none;   /* Bỏ gạch chân */
        font-weight: bold;       /* Chữ đậm */
        font-size: medium;
        }

      .form-section {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        border: 1px solid #e0e0e0;
        transition: all 0.3s ease;
      }
      .form-section:hover {
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
      }
      .form-label {
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 8px;
      }
      .custom-select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%232c3e50' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 10px center;
        border: 1px solid #ced4da;
        border-radius: 6px;
        padding: 10px;
        color: #495057;
        transition: border-color 0.3s ease;
      }
      .custom-select:focus {
        border-color: #4caf50;
        outline: none;
        box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
      }
      .form-control {
        border: 1px solid #ced4da;
        border-radius: 6px;
        padding: 10px;
        color: #495057;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
      }
      .form-control:focus {
        border-color: #4caf50;
        box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
        outline: none;
      }
      .area-unit {
        width: 20%;
        margin-left: 5px;
        background-color: #e9ecef;
        border-color: #ced4da;
        color: #495057;
        cursor: not-allowed;
      }
      .btn-custom-submit {
        background: linear-gradient(45deg, #4c8caf, #4845a0);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 6px;
        transition: all 0.3s ease;
      }
      .btn {
        margin-bottom: 20px;
      }
      .btn-custom-submit:hover {
        background: linear-gradient(45deg, #4550a0, #d2dcd3);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }
      
      .row {
        margin-bottom: 10px;
      }
      .form-check {
        margin-bottom: 10px;
      }
      .form-check-label {
        color: #2c3e50;
        font-weight: 500;
      }
      .tien-ich {
        margin-left: 70px;
      }
      /* CSS cho phần hình ảnh */
      .image-upload-container {
        margin-top: 15px;
        padding: 10px;
        background: #e9ecef;
        border-radius: 5px;
        border: 1px dashed #ced4da;
        text-align: center;
        position: relative;
        min-height: 120px;
      }
      .image-upload-btn {
        display: inline-block;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      .image-upload-btn:hover {
        background-color: #0056b3;
      }
      .image-upload-btn input[type="file"] {
        display: none;
      }
      .image-upload-text {
        color: #6c757d;
        font-style: italic;
        margin-top: 5px;
      }
      .image-preview {
        margin-top: 15px;
        padding: 10px;
        background: #e9ecef;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        flex-wrap: wrap;
        gap: 10px;
        position: relative;
      }
      .image-preview img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        border-radius: 5px;
        border: 2px solid #ddd;
        cursor: pointer;
        transition: transform 0.3s ease;
      }
      .image-preview img:hover {
        transform: scale(1.05);
      }
      .image-preview .more-images {
        width: 100px;
        height: 100px;
        background: #6c757d;
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 5px;
        font-weight: bold;
        position: absolute;
        right: 10px;
      }
      /* Modal CSS */
      .modal-content {
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }
      .modal-body {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
      }
      .modal-body img {
        width: 150px;
        height: 150px;
        object-fit: cover;
        border-radius: 5px;
        border: 2px solid #ddd;
      }
      /* Input file ẩn để thay thế ảnh */
      .hidden-input {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- NAVBAR -->
    <div th:replace="~{/layouts/sidebar-host}"></div>

    <div class="container mt-4">
      <!-- Breadcrumb -->
        <div class="container mt-3">
            <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><i class="bi bi-arrow-bar-left"></i> <a href="#">Sửa bài đăng</a></li>
            </ol>
            </nav>
        </div>

      <!-- Loại danh mục -->
      <div class="form-section">
        <div class="mb-3">
          <label class="form-label">Loại danh mục</label>
          <select class="form-select custom-select">
            <option>Mời bạn chọn loại danh mục phù hợp...</option>
          </select>
        </div>
      </div>

      <!-- Khu vực -->
      <div class="form-section">
        <div class="mb-3">
          <label class="form-label">Khu vực</label>
          <div class="row">
            <div class="col">
              <select class="form-select custom-select" id="provinceSelect">
                <option value="">-- Chọn tỉnh/thành phố --</option>
              </select>
            </div>
            <div class="col">
              <select class="form-select custom-select" id="districtSelect">
                <option value="">-- Chọn quận/huyện --</option>
              </select>
            </div>
          </div>
        </div>
        <div class="mb-3">
          <div class="row">
            <div class="col">
              <select class="form-select custom-select" id="wardSelect">
                <option value="">-- Chọn phường/xã --</option>
              </select>
            </div>
            <div class="col">
              <select class="form-select custom-select" id="streetSelect">
                <option value="">-- Chọn đường/phố --</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Số nhà và Địa chỉ -->
      <div class="form-section">
        <div class="mb-3">
          <div class="row">
            <div class="col">
              <label class="form-label">Số nhà:</label>
              <input
                type="text"
                class="form-control"
                placeholder="Nhập số nhà..."/>
            </div>
            <div class="col">
              <label class="form-label">Địa chỉ:</label>
              <input
                type="text"
                class="form-control"
                placeholder="Nhập địa chỉ..."/>
            </div>
          </div>
        </div>
      </div>

      <!-- Thông tin mô tả -->
      <div class="form-section">
        <div class="mb-3">
          <label class="form-label">Thông tin mô tả</label>
          <textarea
            class="form-control"
            placeholder="Tiêu đề..."
            rows="2"></textarea>
        </div>
      </div>

      <!-- Giá cho thuê và Diện tích -->
      <div class="form-section">
        <div class="mb-3">
          <div class="row">
            <div class="col">
              <label class="form-label">Giá cho thuê:</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Nhập giá..."/>
                <select class="form-select custom-select">
                  <option>VND/Tháng</option>
                </select>
              </div>
            </div>
            <div class="col">
              <label class="form-label">Diện tích:</label>
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  placeholder="Nhập diện tích..."/>
                <input
                  type="text"
                  class="form-control area-unit"
                  value="m²"
                  disabled/>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Nội dung mô tả -->
      <div class="form-section">
        <div class="mb-3">
          <label class="form-label">Nội dung mô tả</label>
          <textarea
            class="form-control"
            placeholder="Nhập nội dung mô tả..."
            rows="4"></textarea>
        </div>
      </div>

      <!-- Tiện ích -->
      <div class="form-section">
        <div class="mb-3">
          <label class="form-label">Tiện ích</label>
          <div class="d-flex flex-wrap">
            <div class="row tien-ich">
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="giuongngu"/>
                <label class="form-check-label" for="giuongngu">Giường ngủ</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="dieuhoa" />
                <label class="form-check-label" for="dieuhoa">Điều hòa</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="wcrung" />
                <label class="form-check-label" for="wcrung">WC riêng</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="chude" />
                <label class="form-check-label" for="chude">Chỗ để xe</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="tuquanao" />
                <label class="form-check-label" for="tuquanao">Tủ quần áo</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="beep" />
                <label class="form-check-label" for="beep">Bếp</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="nuocnong" />
                <label class="form-check-label" for="nuocnong">Nước nóng</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="chulua" />
                <label class="form-check-label" for="chulua">Chữ lua</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="wififree" />
                <label class="form-check-label" for="wififree">Wifi free</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input
                  type="checkbox"
                  class="form-check-input"
                  id="cameraninh"/>
                <label class="form-check-label" for="cameraninh">Camera an ninh</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="thetui" />
                <label class="form-check-label" for="thetui">Thẻ từ</label>
              </div>
              <div class="col-xl-2 col-lg-3 col-sm-4 col-xs-6 form-check me-4">
                <input type="checkbox" class="form-check-input" id="tv" />
                <label class="form-check-label" for="tv">TV LCD</label>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Hình ảnh -->
      <div class="form-section">
        <div class="mb-3">
          <label class="form-label">Hình ảnh</label>
          <div class="image-upload-container">
            <label for="upload-image" class="image-upload-btn">
              <i class="fas fa-camera"></i> Tải hình ảnh
            </label>
            <input
              type="file"
              class="form-control"
              id="upload-image"
              accept="image/*"
              multiple
              style="display: none;"
            />
            <p class="image-upload-text">Tải hình ảnh từ thiết bị</p>
          </div>
          <div class="image-preview" id="imagePreview"></div>
          <!-- Input file ẩn để thay thế ảnh -->
          <input type="file" class="hidden-input" id="replace-image" accept="image/*" />
        </div>
      </div>

      <!-- Thông tin liên hệ -->
      <div class="form-section">
        <div class="mb-3">
          <label class="form-label">Thông tin liên hệ</label>
          <div class="row">
            <div class="col">
              <input type="text" class="form-control" placeholder="Họ và tên" />
            </div>
            <div class="col">
              <input
                type="text"
                class="form-control"
                placeholder="Số điện thoại"
              />
            </div>
          </div>
        </div>
      </div>

      <!-- Nút gửi -->
      <div class="text-center mt-4">
        <button type="submit" class="btn btn-custom-submit me-2">
          Sửa bài
        </button>
        
      </div>

      <!-- Modal để hiển thị tất cả ảnh -->
      <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="imageModalLabel">Tất cả hình ảnh</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modalImageContainer">
              <!-- Ảnh sẽ được thêm vào đây -->
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script th:src="@{/bootstrap/js/bootstrap.bundle.min.js}"></script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        function getMaxImages() {
          const width = window.innerWidth;
          if (width >= 1400) return 10; // xl (≥1400px)
          if (width >= 992) return 8;   // lg (≥992px)
          if (width >= 576) return 5;   // sm (≥576px)
          return 5;                     // xs (<576px)
        }

        let imageElements = [];
        let originalFiles = []; // Lưu trữ danh sách file gốc

        // Kiểm tra và gắn sự kiện cho upload-image
        const uploadInput = document.getElementById("upload-image");
        if (uploadInput) {
          uploadInput.addEventListener("change", function (e) {
            const files = e.target.files;
            const preview = document.getElementById("imagePreview");
            if (preview) {
              preview.innerHTML = ""; // Xóa nội dung cũ
              originalFiles = Array.from(files); // Lưu trữ file gốc

              if (files.length > 0) {
                const maxImages = getMaxImages();
                const imageContainer = document.createElement("div");
                imageContainer.style.position = "relative";
                imageContainer.style.width = "100%";
                imageContainer.style.display = "flex";
                imageContainer.style.alignItems = "center";
                imageContainer.style.flexWrap = "wrap";
                imageContainer.style.gap = "10px";

                imageElements = []; // Reset mảng ảnh

                for (let i = 0; i < Math.min(files.length, maxImages); i++) {
                  const file = files[i];
                  const reader = new FileReader();

                  reader.onload = function (event) {
                    const img = document.createElement("img");
                    img.src = event.target.result;
                    img.style.width = "100px";
                    img.style.height = "100px";
                    img.style.objectFit = "cover";
                    img.style.borderRadius = "5px";
                    img.style.border = "2px solid #ddd";
                    img.dataset.index = i; // Lưu index của ảnh
                    imageContainer.appendChild(img);
                    imageElements.push(img);

                    // Thêm sự kiện click để thay thế ảnh
                    img.addEventListener("click", function () {
                      const replaceInput = document.getElementById("replace-image");
                      if (replaceInput) {
                        replaceInput.dataset.replaceIndex = this.dataset.index;
                        replaceInput.click();
                      } else {
                        console.error("Không tìm thấy replace-image! Vui lòng kiểm tra HTML.");
                      }
                    });
                  };
                  reader.readAsDataURL(file);
                }

                // Thêm sự kiện click để mở modal hiển thị tất cả ảnh
                imageContainer.addEventListener("click", function (e) {
                  if (e.target.tagName === "IMG") return; // Ngăn chặn click vào ảnh riêng lẻ kích hoạt modal
                  const modalBody = document.getElementById("modalImageContainer");
                  if (modalBody) {
                    modalBody.innerHTML = ""; // Xóa nội dung cũ của modal
                    for (let i = 0; i < originalFiles.length; i++) {
                      const file = originalFiles[i];
                      const reader = new FileReader();
                      reader.onload = function (event) {
                        const img = document.createElement("img");
                        img.src = event.target.result;
                        modalBody.appendChild(img);
                      };
                      reader.readAsDataURL(file);
                    }
                    const modal = new bootstrap.Modal(document.getElementById("imageModal"));
                    modal.show();
                  } else {
                    console.error("Không tìm thấy modalImageContainer!");
                  }
                });

                if (files.length > maxImages) {
                  const moreImages = document.createElement("div");
                  moreImages.className = "more-images";
                  moreImages.textContent = `+${files.length - maxImages}`;
                  moreImages.style.position = "absolute";
                  moreImages.style.right = "10px";
                  imageContainer.appendChild(moreImages);
                }

                preview.appendChild(imageContainer);
              } else {
                preview.innerHTML = "";
              }
            } else {
              console.error("Không tìm thấy imagePreview!");
            }
          });
        } else {
          console.error("Không tìm thấy upload-image! Vui lòng kiểm tra HTML.");
        }

        // Xử lý thay thế ảnh
        const replaceInput = document.getElementById("replace-image");
        if (replaceInput) {
          replaceInput.addEventListener("change", function (e) {
            const replaceFile = e.target.files[0];
            const replaceIndex = parseInt(this.dataset.replaceIndex);
            if (replaceFile && replaceIndex >= 0 && replaceIndex < imageElements.length) {
              const reader = new FileReader();
              reader.onload = function (event) {
                imageElements[replaceIndex].src = event.target.result;
                // Cập nhật file gốc tại vị trí tương ứng
                if (originalFiles && replaceIndex < originalFiles.length) {
                  originalFiles[replaceIndex] = replaceFile;
                }
              };
              reader.readAsDataURL(replaceFile);
              this.value = ""; // Reset input để có thể chọn lại file
            } else {
              console.error("Không thể thay thế ảnh: Index không hợp lệ hoặc file không tồn tại.");
            }
          });
        } else {
          console.error("Không tìm thấy replace-image! Vui lòng kiểm tra HTML.");
        }

        // Cập nhật lại khi thay đổi kích thước màn hình
        window.addEventListener("resize", function () {
          const uploadInput = document.getElementById("upload-image");
          if (uploadInput && uploadInput.files.length > 0) {
            uploadInput.dispatchEvent(new Event("change"));
          }
        });

        // Hàm tải dữ liệu từ API provinces.open-api.vn
        async function fetchProvinces() {
          try {
            const response = await fetch('https://provinces.open-api.vn/api/?depth=1');
            const provinces = await response.json();
            const provinceSelect = document.getElementById('provinceSelect');
            if (provinceSelect) {
              provinceSelect.innerHTML = '<option value="">-- Chọn tỉnh/thành phố --</option>';
              provinces.forEach(province => {
                const option = document.createElement('option');
                option.value = province.code;
                option.textContent = province.name;
                provinceSelect.appendChild(option);
              });
            } else {
              console.error("Không tìm thấy provinceSelect!");
            }
          } catch (error) {
            console.error('Lỗi khi tải danh sách tỉnh:', error);
          }
        }

        // Hàm tải danh sách quận/huyện dựa trên tỉnh
        async function fetchDistricts(provinceCode) {
          try {
            const response = await fetch(`https://provinces.open-api.vn/api/p/${provinceCode}?depth=2`);
            const data = await response.json();
            const districtSelect = document.getElementById('districtSelect');
            if (districtSelect) {
              districtSelect.innerHTML = '<option value="">-- Chọn quận/huyện --</option>';
              data.districts.forEach(district => {
                const option = document.createElement('option');
                option.value = district.code;
                option.textContent = district.name;
                districtSelect.appendChild(option);
              });
            } else {
              console.error("Không tìm thấy districtSelect!");
            }
          } catch (error) {
            console.error('Lỗi khi tải danh sách quận/huyện:', error);
          }
        }

        // Hàm tải danh sách phường/xã dựa trên quận/huyện
        async function fetchWards(districtCode) {
          try {
            const response = await fetch(`https://provinces.open-api.vn/api/d/${districtCode}?depth=2`);
            const data = await response.json();
            const wardSelect = document.getElementById('wardSelect');
            if (wardSelect) {
              wardSelect.innerHTML = '<option value="">-- Chọn phường/xã --</option>';
              data.wards.forEach(ward => {
                const option = document.createElement('option');
                option.value = ward.code;
                option.textContent = ward.name;
                wardSelect.appendChild(option);
              });
            } else {
              console.error("Không tìm thấy wardSelect!");
            }
          } catch (error) {
            console.error('Lỗi khi tải danh sách phường/xã:', error);
          }
        }

        // Hàm tải danh sách đường/phố (giả định, vì API không cung cấp dữ liệu đường/phố)
        function fetchStreets(wardCode) {
          const streetSelect = document.getElementById('streetSelect');
          if (streetSelect) {
            streetSelect.innerHTML = '<option value="">-- Chọn đường/phố --</option>';
            // Giả lập danh sách đường/phố (vì API không có dữ liệu này, bạn có thể bổ sung thủ công)
            const streets = [
              { code: 'street1', name: 'Đường Lê Lợi' },
              { code: 'street2', name: 'Đường Nguyễn Huệ' },
              { code: 'street3', name: 'Đường Trần Phú' },
            ];
            streets.forEach(street => {
              const option = document.createElement('option');
              option.value = street.code;
              option.textContent = street.name;
              streetSelect.appendChild(option);
            });
          } else {
            console.error("Không tìm thấy streetSelect!");
          }
        }

        // Gọi API khi trang tải
        fetchProvinces();

        // Xử lý sự kiện thay đổi tỉnh
        const provinceSelect = document.getElementById('provinceSelect');
        if (provinceSelect) {
          provinceSelect.addEventListener('change', function () {
            const provinceCode = this.value;
            if (provinceCode) {
              fetchDistricts(provinceCode);
              document.getElementById('districtSelect').value = '';
              document.getElementById('wardSelect').value = '';
              document.getElementById('streetSelect').value = '';
            }
          });
        } else {
          console.error("Không tìm thấy provinceSelect!");
        }

        // Xử lý sự kiện thay đổi quận/huyện
        const districtSelect = document.getElementById('districtSelect');
        if (districtSelect) {
          districtSelect.addEventListener('change', function () {
            const districtCode = this.value;
            if (districtCode) {
              fetchWards(districtCode);
              document.getElementById('wardSelect').value = '';
              document.getElementById('streetSelect').value = '';
            }
          });
        } else {
          console.error("Không tìm thấy districtSelect!");
        }

        // Xử lý sự kiện thay đổi phường/xã
        const wardSelect = document.getElementById('wardSelect');
        if (wardSelect) {
          wardSelect.addEventListener('change', function () {
            const wardCode = this.value;
            if (wardCode) {
              fetchStreets(wardCode);
              document.getElementById('streetSelect').value = '';
            }
          });
        } else {
          console.error("Không tìm thấy wardSelect!");
        }
      });
    </script>
  </body>
</html>