<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/layouts/head}">
    <title>Nhà Trọ Xanh</title>
</head>
<body class="thongtintro">
    <!-- SIDEBAR -->
    <div th:replace="~{/layouts/sidebar-host}"></div>

    <!-- Main Content -->
    <div class="main-content-host" id="mainContentHost">
        <div class="content-container-host">
            <!-- Header Section -->
            <div class="page-header-host">
                <h1 class="page-title-host">QUẢN LÝ THÔNG TIN TRỌ</h1>
                <a th:href="@{/chu-tro/them-khu-tro}" style="text-decoration: none;">
                    <button class="btn-primary-host" id="addNewAreaHost">
                        <i class="fas fa-plus"></i>
                        Thêm khu trọ mới
                    </button>
                </a>
            </div>

            <!-- Search Section -->
            <div class="search-section-host">
                <div class="search-container-host">
                    <input type="text" class="search-input-host" id="searchInputHost" th:value="${searchName}" placeholder="Tìm kiếm..." />
                    <button class="btn-search-host" id="searchButtonHost" onclick="searchHostels()">TÌM KIẾM</button>
                </div>
            </div>

            <!-- Table Section -->
            <div class="table-container-host">
                <table class="data-table-host" id="dataTableHost">
                    <thead class="table-header-host">
                        <tr>
                            <th class="table-th-host">ID</th>
                            <th class="table-th-host">Khu trọ</th>
                            <th class="table-th-host">Trạng thái</th>
                            <th class="table-th-host">Hoạt động</th>
                        </tr>
                    </thead>
                    <tbody class="table-body-host" id="tableBodyHost">
                        <tr class="table-row-host" th:each="hostel : ${hostels}">
                            <td class="table-td-host" th:text="${hostel.hostelId}"></td>
                            <td class="table-td-host" th:text="${hostel.name}"></td>
                            <td class="table-td-host">
                                <span th:class="${hostel.status} ? 'status-badge-host status-active-host' : 'status-badge-host status-inactive-host'"
                                      th:text="${hostel.status} ? 'Đang hoạt động' : 'Ngưng hoạt động'"></span>
                            </td>
                            <td class="table-td-host">
                                <div class="action-btns-host">
                                    <a th:href="@{/chu-tro/edit-khu-tro(id=${hostel.hostelId})}">
                                        <button class="buttons-edit-host" title="Chỉnh sửa">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </a>
                                    <form th:action="@{/chu-tro/delete-khu-tro(id=${hostel.hostelId})}" method="get" style="display:inline;">
                                        <button type="submit" class="btn-delete-host" title="Xóa" onclick="return confirm('Bạn có chắc muốn xóa khu trọ này?');">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        function searchHostels() {
            let searchName = $('#searchInputHost').val();
            window.location.href = "/chu-tro/thong-tin-tro?name=" + encodeURIComponent(searchName);
        }
        $('#searchInputHost').on('keypress', function(e) {
            if (e.which === 13) { // Enter key
                searchHostels();
            }
        });
    </script>
</body>
</html>